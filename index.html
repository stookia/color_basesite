<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customized Welcome Page</title>
</head>
<body>

<script>
  // リファラから特定のサイトのドメインを取得する関数
  function getReferrerDomain(referrer) {
    if (!referrer) {
      return null;
    }

    const match = referrer.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
    if (match != null && match.length > 2 && typeof match[2] === 'string' && match[2].length > 0) {
      return match[2];
    } else {
      return null;
    }
  }

  // ローカルストレージからデータを取得
  const visitStatusA = localStorage.getItem('visitStatusA') || 'A: 未完了';
  const visitStatusB = localStorage.getItem('visitStatusB') || 'B: 未完了';

  // リファラを取得
  const referrer = document.referrer || 'default-value';

  // 特定のサイトからのアクセスの場合のドメイン
  const siteA_domain = 'https://stookia.github.io/home/'; // Aのサイトのドメイン
  const siteB_domain = 'siteB.com'; // Bのサイトのドメイン

  // メッセージをデフォルトで「未完了」に設定
  let messageA = 'A: 未完了';
  let messageB = 'B: 未完了';

  // 特定のサイトからのアクセスであるか確認
  const siteDomain = getReferrerDomain(referrer);
  if (siteDomain) {
    if (siteDomain === siteA_domain) {
      messageA = 'A: 完了';
      // ローカルストレージに情報を保存
      localStorage.setItem('visitStatusA', messageA);
    } else if (siteDomain === siteB_domain) {
      messageB = 'B: 完了';
      // ローカルストレージに情報を保存
      localStorage.setItem('visitStatusB', messageB);
    }
  }

  // メッセージを表示
  document.body.innerHTML = `<h1>${messageA}</h1><h1>${messageB}</h1>`;
</script>

</body>
</html>
