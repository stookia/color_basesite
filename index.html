<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Webサイト</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
	<!--
	<div class="map">
		<iframe src="https://stookia.github.io/map/" width="100%" height="382" frameborder="0" marginheight="0" marginwidth="0">loading your map...</iframe>
	</div>
	-->
<p style="color:#000000">色変わる？</p><br><br>

    <p>訪問地数</p><br>
    <p id="count" class="count">0</p>
    <p>/50</p>
    <div class="spot" id="statusA">A:未完了</div>
    <div class="spot" id="statusB">B:未完了</div>
　　<iframe id="Gfrome" src="https://docs.google.com/forms/d/e/1FAIpQLSduilY0BAaDdyQWAn7_l73QcJaNHlrJ2XnLHuowBEuVDNqsGw/viewform?embedded=true?usp=pp_url&entry.959407632=" width="100%" height="382" frameborder="0" marginheight="0" marginwidth="0">読み込んでいます…</iframe>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
        // ローカルストレージから状態を取得
            const statusA = localStorage.getItem("statusA") || "未完了";
            const statusB = localStorage.getItem("statusB") || "未完了";
	　　const col1=localStorage.getItem("col1")||"color:#000000";
        　　const col2=localStorage.getItem("col2")||"color:#000000";
        
	    if(col1 !=="color:#000000"){
        	document.getElementById('col1').style=col1;
        　　}
        　　if(col2 !=="color:#000000"){
        	document.getElementById('col2').style=col2;
        　　}
		
            // 初回訪問かどうかを確認し、状態を表示
            if (statusA === "完了") {
                document.getElementById("statusA").textContent = "A:完了";
            }
            if (statusB === "完了") {
                document.getElementById("statusB").textContent = "B:完了";
            }
    
            // Google経由でのアクセスかどうかを確認し、状態を変更してローカルストレージに保存
            const referrer = document.referrer;
            if (referrer.includes("https://stookia.github.io/home/") && statusA !== "完了") {
                document.getElementById("statusA").textContent = "A:完了";
                localStorage.setItem("statusA", "完了");
            }
            const referrerB = document.referrer;
            if (referrerB.includes("https://stookia.github.io/home2/") && statusB !== "完了") {
                document.getElementById("statusB").textContent = "B:完了";
                localStorage.setItem("statusB", "完了");
            }

            const key=Object.keys(localStorage).length;
        
            if(key !==0){
                const count=Math.floor(key/2);
                document.getElementById('count').textContent=count;
                }else{
                    document.getElementById('count')=0;
            }

	　　const url=document.getElementById("Gfrome").src +"%23"+ col1.substring(7);
		document.getElementById("Gfrome").src=url;
    });
    </script>

</body>
</html>
